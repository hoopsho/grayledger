# 07.001. AI-First Invoicing – Natural Language → Perfect Double-Entry Invoice

**Status:** accepted  
**Date:** 2025-11-19

## Context
Users want to get paid, but hate invoice forms.  
Every extra click loses money.  
We already have GPT-4o + the ledger — we can make invoicing disappear.

## Decision
The primary way to create an invoice is a single text box:

> “Invoice Acme Corp for website redesign $8,500 plus $327 expenses, due in 30 days, add sales tax”

AI does everything else.

### Flow
1. User types or speaks the sentence → hits Enter
2. GPT-4o parses:
   - Customer (create if new)
   - Line items + quantities + prices
   - Tax rules via TaxCloud (server-side)
   - Due date
   - Optional notes
3. Preview screen (Turbo Frame): “Here’s your invoice – look good?”
   - Table with line items, subtotal, tax, total
   - One-click Edit or Send
4. On Send:
   - Creates Invoice + LineItems
   - Posts A/R debit + Revenue credit Entry (open item)
   - Emails PDF + Stripe/PayPal payment link
   - AI starts AR chaser the next day

### Models (minimal)
```ruby
class Invoice < ApplicationRecord
  include BelongsToCompany
  belongs_to :customer
  has_many :line_items, dependent: :destroy
  has_one_attached :pdf

  enum status: { draft: 0, sent: 1, paid: 2, overdue: 3, void: 4 }
end

class Customer < ApplicationRecord
  include BelongsToCompany
  has_many :invoices
  monetize :default_tax_rate_cents # fallback if TaxCloud down
end
```

### Payment matching
When money hits bank → pgvector + AI matches it to open invoice → marks paid → posts bank credit / A/R debit.

## Consequences

- Users create invoices in < 10 seconds
- Zero manual data entry
- Books stay perfect because invoice → Entry is atomic
- Late payment chasing is automatic (next ADR)
- We beat every "AI invoice" feature released in 2025 because ours actually posts real double-entry

This is the revenue rocket.
