# 01.002. Deploy to Heroku with PostgreSQL + pgvector

**Status:** accepted  
**Date:** 2025-11-19

## Context
We need a hosting platform that lets a solo developer:
- deploy in one command (`git push`)
- never manage servers
- have PostgreSQL with pgvector available on day one
- keep monthly costs under $300 for the first 1,000 customers

## Decision
- Primary platform: Heroku
- Database: Heroku Postgres (Hobby Dev → Standard 0 → Standard 2 as we grow)
- pgvector enabled via Heroku’s official pgvector add-on (free tier available in 2025)
- Background jobs: Solid Queue using the same Heroku Postgres instance (no Redis needed)
- File storage: Active Storage with Amazon S3 (direct upload, credentials in Heroku config vars)
- Add-ons we will use:
  - Heroku Postgres (with pgvector)
  - Heroku Scheduler (only for fallback daily jobs if webhooks fail)
  - Papertrail (logs)
  - Mission Control – Jobs (built-in UI for Solid Queue)

## Buildpack order (critical)
```bash
heroku buildpacks
1. heroku/ruby
2. https://github.com/heroku/heroku-buildpack-pgvector.git
Config vars we will set on day one
Bashheroku config:set \
  RAILS_ENV=production \
  RACK_ENV=production \
  OPENAI_API_KEY=sk-... \
  PLAID_CLIENT_ID=... \
  PLAID_SECRET=... \
  TAXCLOUD_API_LOGIN=... \
  TAXCLOUD_API_KEY=... \
  AWS_ACCESS_KEY_ID=... \
  AWS_SECRET_ACCESS_KEY=... \
  AWS_REGION=us-east-1 \
  AWS_S3_BUCKET=ledger-ai-production
Consequences

Zero ops work — I can deploy from my laptop in seconds
pgvector works out of the box for AI memory/cache
Total cost at 500 active companies ≈ $80–$120/mo
We can migrate off Heroku later if we ever outgrow it (PostgreSQL + S3 are portable)

This is the fastest, cheapest, most solo-friendly path in 2025.
Accepted.
