# 09.001. AI-Driven Fixed Assets & Loans – Zero-Touch Depreciation & Amortization

**Status:** accepted  
**Date:** 2025-11-19

## Context
Every concrete guy has a mixer truck loan. Every sign shop has a plotter. Every lawn guy has a trailer.  
They all need depreciation and interest expense correct for taxes, but they will never fill out a depreciation schedule.

## Decision
User uploads one receipt or promissory note → AI does everything forever.

### Flow
1. User drags in “F150 purchase receipt $48,200” or “Equipment loan $120k 5yr 6.8% $2,311/mo”
2. GPT-4o Vision extracts:
   - Asset description & cost
   - Placed-in-service date
   - Class (5-yr, 7-yr, 39-yr, etc.)
   - Bonus depreciation eligibility
   - Loan terms if present
3. System auto-creates:
   - FixedAsset record
   - Loan record with full amortization table
   - Initial Entry (Dr Fixed Asset, Cr Loan or Checking)
4. Monthly Solid Queue job posts:
   - Depreciation (MACRS or straight-line)
   - Interest expense vs principal reduction

### Models (tiny)
```ruby
class FixedAsset < ApplicationRecord
  include BelongsToCompany
  monetize :cost_cents
  has_one :loan, dependent: :destroy
  enum depreciation_method: { macrs_gds: 0, straight_line: 1, bonus_100: 2 }
end

class Loan < ApplicationRecord
  belongs_to :fixed_asset, optional: true
  monetize :principal_cents, :monthly_payment_cents
  has_many :amortization_entries # generated once
end
IRS MACRS tables baked in (2025 rules)

Half-year convention
Bonus depreciation flag (user can toggle “Take 100 % bonus this year”)
Section 179 one-click alternative

Monthly job (runs on the 1st)
RubyFixedAsset.where("placed_in_service <= ?", Date.today).find_each do |asset|
  amount = DepreciationCalculator.monthly_amount(asset)
  next if amount.zero?

  Entry.create!(company: asset.company, description: "Depreciation – #{asset.name}", posted_at: Date.today) do |e|
    e.line_items.build(account: expense_account("Depreciation Expense"), amount_cents: amount.cents)
    e.line_items.build(account: contra_account("Accumulated Depreciation"), amount_cents: -amount.cents)
  end
end
Same job handles loan interest/principal split perfectly.
Consequences

Users get perfect Form 4562 every year with zero effort
Interest expense is always correct for Schedule C
No manual schedules, no spreadsheets, no CPA surprises
Works for vehicles, equipment, buildings, computers

One upload → correct books for the next 39 years.
Accepted.
