# 14.001. Platform Superuser God-Mode – Emergency Backdoor Only

**Status:** accepted  
**Date:** 2025-11-19

## Context
Sometimes a customer is locked out, books are broken, or fraud is happening right now.  
We (the platform team) need to be able to fix anything instantly without asking the user to invite us.

## Decision
Any user whose email domain is `@ledgerai.com` (or is in a hard-coded allow-list) automatically becomes a platform superuser.

### What god-mode can do (and only god-mode)
- Log in as any user (via /god/login_as/:user_id)
- Temporarily override Current.company to any company
- View and edit any record in any company
- Impersonate any membership role
- Run any Solid Queue job manually
- See raw AI prompts/responses and pgvector embeddings
- Force-post or delete any entry (with permanent audit trail)

### Implementation
```ruby
# app/models/current.rb
def self.platform_staff?
  user
  user&.email&.end_with?("@ledgerai.com") || %w[you@youremail.com].include?(user.email)
end

# in every policy
def god_mode?
  Current.user && Current.platform_staff?
end

def show?; god_mode? || regular_permissions; end
# etc.
All god-mode actions are logged forever in a separate platform_audit_logs table with user_id, company_id, action, and description.
Usage rules

Only for emergencies or with explicit customer consent (recorded)
Never for competitive spying
All actions appear in customer’s activity log as “Platform Support (you@ledgerai.com) fixed X”

Consequences

We can save any customer in < 5 minutes
Zero “please add me as admin” friction
Trust is maintained because everything is audited
No extra UI or permissions bloat for normal users

This is the parachute is the difference between a good app and a bulletproof business.
Accepted.
